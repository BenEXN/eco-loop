<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Looop v1.13.0 ‚Äì Version enti√®rement fonctionnelle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { background: #f3f3f3; font-family: sans-serif; margin:0; padding:0; }
    h1 { text-align: center; margin: 25px 0 10px; }
    .container { display: flex; justify-content: center; align-items: flex-start; margin: 0 auto 18px auto; max-width: 950px; gap: 24px;}
    .category { background: #fff; border-radius: 18px; box-shadow: 0 4px 24px #0001; flex: 1; padding: 32px 18px 18px 18px; margin: 0 6px; min-width: 250px; max-width: 320px; min-height: 250px; display: flex; flex-direction: column; align-items: center;}
    .cat-title { font-size: 1.25em; margin-bottom: 20px; font-weight: bold; letter-spacing: 1px;}
    .stock { font-size: 1.1em; margin-bottom: 10px;}
    .products-box { background: #f7f7fa; border: 2px solid #dde1eb; border-radius: 10px; color: #333; margin-bottom: 10px; padding: 10px 28px; font-size: 1.2em; font-weight: bold; letter-spacing: 1px; box-shadow: 0 1px 4px #ddd5; min-width: 110px; text-align: center;}
    .btn-row { margin: 18px 0 0 0;}
    button { font-size: 1em; padding: 10px 18px; margin: 5px 0; border-radius: 14px; border: none; background: #ededed; color: #111; cursor: pointer; transition: background 0.2s;}
    .btn-factory { background: #ff5722; color: #fff; font-weight: bold; border-radius: 8px;}
    .btn-trading-market { background: #795548; color: #fff; font-weight: bold; border-radius: 8px;}
    .btn-price-indicator { background: #607d8b; color: #fff; font-weight: bold; border-radius: 8px;}
    .btn-auto-clicks { background: #9c27b0; color: #fff; font-weight: bold; border-radius: 8px;}
    .hidden { display: none !important; }
    .price-indicator { background: #f7f7fa; border: 2px solid #dde1eb; border-radius: 10px; padding: 10px; margin: 10px 0; text-align: center;}
    .jauge-bottom-barre { margin: 0 auto 6px auto; display: flex; flex-direction: row; align-items: center; gap: 8px; max-width: 600px;}
    .jauge-bottom-label { min-width: 70px; font-size: .99em; color: #888; text-align: right;}
    .jauge-bottom-bar { background: #eee; border-radius: 8px; height: 13px; flex: 1; overflow: hidden; position: relative;}
    .jauge-bottom-fill { height: 100%; border-radius: 8px; transition: width 0.19s;}
    #jauge-nature { background: #86e08e;}
    #jauge-confort { background: #86b6ea;}
    #jauge-money { background: #ffb3b3;}
    #jauge-budget { background: #f9e79f;}
    .jauge-bottom-val { font-size: .97em; color: #666; min-width: 60px; text-align: left; padding-left: 4px; }
  </style>
</head>
<body>
  <h1>üåç Looop <span style="font-size:0.7em;color:#777;">v1.13.0</span></h1>
  <div class="container">
    <div class="category">
      <div class="cat-title">üå± Environnement</div>
      <div class="stock">Ressources : <span id="nature">300</span></div>
      <div class="btn-row">
        <button id="produce-btn" onclick="produce()">üõ†Ô∏è Produire</button>
      </div>
    </div>
    <div class="category">
      <div class="cat-title">ü§ñ Exosomatisation</div>
      <div class="stock">Confort : <span id="confort">0</span></div>
      <div class="products-box">
        Produits cr√©√©s<br>
        <span id="production">0</span>
      </div>
      <div class="btn-row">
        <button id="sell-btn" onclick="sell()">üí∂ Vente</button>
      </div>
    </div>
    <div class="category">
      <div class="cat-title">üí∂ √âconomie</div>
      <div class="stock" id="money-row" style="display:none;">
        Monnaie (‚Ç¨) : <span id="money">10</span>
      </div>
      <div id="price-indicator" class="price-indicator hidden">
        <strong>üìä Prix: <span id="current-price">0</span>‚Ç¨/unit√© de production</strong>
      </div>
      <button id="don-btn" onclick="receiveDon()">Recevoir mon don</button>
      <div class="btn-row">
        <button id="ouvrier-btn" onclick="acheterIA()">ü§ñ Engager une IA (500 ‚Ç¨)</button>
        <button id="trading-btn" onclick="acheterTrader()">üè™ Acheter un trader auto (1000 ‚Ç¨)</button>
        <button id="upgrade-btn2" onclick="upgradeProd2()">üí† Am√©liorer la production (2 000 ‚Ç¨)</button>
        <button id="factory-btn" class="btn-factory hidden" onclick="acheterUsine()">üè≠ Usine de Production (√ó10) - 20 000 ‚Ç¨</button>
        <button id="trading-market-btn" class="btn-trading-market hidden" onclick="acheterMarcheTrading()">üìà March√© de Trading (√ó10 vente) - 20 000 ‚Ç¨</button>
        <button id="price-indicator-btn" class="btn-price-indicator hidden" onclick="acheterIndicateurPrix()">üìä Indicateur de Prix - 30 000 ‚Ç¨</button>
        <button id="auto-clicks-btn" class="btn-auto-clicks hidden" onclick="acheterAutoClicks()">‚öôÔ∏è Les automatismes comptent comme des clics - 10 000 ‚Ç¨</button>
      </div>
    </div>
  </div>

  <div style="margin: 0 auto 14px auto; max-width:620px;">
    <div class="jauge-bottom-barre">
      <div class="jauge-bottom-label">üå± Ressources</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-nature"></div></div>
      <div class="jauge-bottom-val" id="jauge-nature-txt"></div>
    </div>
    <div class="jauge-bottom-barre">
      <div class="jauge-bottom-label">ü§ñ Confort</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-confort"></div></div>
      <div class="jauge-bottom-val" id="jauge-confort-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-money-container" style="display:none;">
      <div class="jauge-bottom-label">üí∂ Monnaie</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-money"></div></div>
      <div class="jauge-bottom-val" id="jauge-money-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-budget-container" style="display:none;">
      <div class="jauge-bottom-label">üí∂ Budget √âtat</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-budget"></div></div>
      <div class="jauge-bottom-val" id="jauge-budget-txt"></div>
    </div>
  </div>

  <script>
    // --- Variables globales et unlocks uniques ---
    let nature = 300, confort = 0, production = 0, money = 10, clicks = 0;
    let monnaieActive = false;
    let productionMultiplier = 1, salesMultiplier = 1;
    let factoryBought = false, tradingMarketBought = false, priceIndicatorBought = false, autoClicksBought = false;
    let upgradeCount = 0;
    let budgetEtat = 0, clicksTaxe = 0;
    let unlocks = {
      factory: false, tradingMarket: false, priceIndicator: false, autoClicks: false
    };

    // --- Mise √† jour interface (tous les √©l√©ments) ---
    function updateUI() {
      document.getElementById("nature").textContent = nature;
      document.getElementById("confort").textContent = confort;
      document.getElementById("production").textContent = production;
      document.getElementById("money").textContent = money;

      // Apparition des bonus au SEUIL et jamais plus d'une fois
      document.getElementById("factory-btn").classList.toggle("hidden", !(clicks >= 1500 && !factoryBought));
      document.getElementById("trading-market-btn").classList.toggle("hidden", !(clicks >= 1600 && !tradingMarketBought));
      document.getElementById("price-indicator-btn").classList.toggle("hidden", !(clicks >= 1000 && !priceIndicatorBought));
      document.getElementById("auto-clicks-btn").classList.toggle("hidden", !(clicks >= 750 && !autoClicksBought));

      // Affichage du prix relatif si achet√©
      document.getElementById("price-indicator").classList.toggle("hidden", !priceIndicatorBought);

      if (priceIndicatorBought) {
        let priceVal = Math.round(Math.abs(money) / Math.max(1, nature));
        document.getElementById("current-price").textContent = priceVal;
      }

      // Affichage jauges
      let maxNature = 300, maxConfort = 100, maxMoney = 5000, maxBudget = Math.max(1000, budgetEtat);
      document.getElementById("jauge-nature").style.width = (100 * Math.max(0, Math.min(nature, maxNature)) / maxNature) + "%";
      document.getElementById("jauge-nature-txt").textContent = nature + " / " + maxNature;
      document.getElementById("jauge-confort").style.width = (100 * Math.max(0, Math.min(confort, maxConfort)) / maxConfort) + "%";
      document.getElementById("jauge-confort-txt").textContent = confort + " / " + maxConfort;
      // Argent
      document.getElementById("jauge-money-container").style.display = monnaieActive ? "flex" : "none";
      if (monnaieActive) {
        let moneyPercent = Math.max(0, Math.min(100, (money + 1000) / (maxMoney + 1000) * 100));
        document.getElementById("jauge-money").style.width = moneyPercent + "%";
        document.getElementById("jauge-money-txt").textContent = money + " ‚Ç¨" + (money < 0 ? " (dette)" : "");
      }
      // Budget √âtat
      document.getElementById("jauge-budget-container").style.display = (budgetEtat > 0) ? "flex" : "none";
      document.getElementById("jauge-budget").style.width = (100 * Math.max(0, Math.min(budgetEtat, maxBudget)) / maxBudget) + "%";
      document.getElementById("jauge-budget-txt").textContent = budgetEtat + " ‚Ç¨";
    }

    // --- Actions principales ---
    function produce() {
      if (!monnaieActive) return;
      if (nature < 1) return;
      nature--;
      production += productionMultiplier;
      money--;
      clicks++;
      gererTaxeEtat();
      updateUI();
    }
    function sell() {
      if (!monnaieActive) return;
      if (production < 1) return;
      production--;
      money += 2 * salesMultiplier;
      confort++;
      clicks++;
      gererTaxeEtat();
      updateUI();
    }
    function receiveDon() {
      if (monnaieActive) return;
      monnaieActive = true;
      money += 50;
      updateUI();
    }

    // --- Taxe budget √âtat ---
    function gererTaxeEtat() {
      if (!monnaieActive) return;
      clicksTaxe++;
      if (clicksTaxe % 20 === 0) {
        // 20% du solde absolu (positif ou n√©gatif)
        let base = Math.abs(money);
        let taxe = Math.round(base * 0.2);
        money -= taxe;
        budgetEtat += taxe;
        nature += 1;
        confort += 1;
      }
    }

    // --- BONUS/ACHATS UNIQUES ---
    function acheterUsine() { money -= 20000; productionMultiplier *= 10; factoryBought = true; updateUI(); }
    function acheterMarcheTrading() { money -= 20000; salesMultiplier *= 10; tradingMarketBought = true; updateUI(); }
    function acheterIndicateurPrix() { money -= 30000; priceIndicatorBought = true; updateUI(); }
    function acheterAutoClicks() { money -= 10000; autoClicksBought = true; updateUI(); }
    function acheterIA() { money -= 500; confort += 5; updateUI(); }
    function acheterTrader() { money -= 1000; production++; updateUI(); }
    function upgradeProd2() { money -= 2000; productionMultiplier++; updateUI(); }

    // --- INITIALISATION ---
    document.addEventListener('DOMContentLoaded', function() {
      updateUI();
      // Afficher la monnaie si d√©j√† re√ßue au refresh
      document.getElementById("money-row").style.display = monnaieActive ? "block" : "none";
      document.getElementById("don-btn").style.display = monnaieActive ? "none" : "inline-block";
    });
  </script>
</body>
</html>


