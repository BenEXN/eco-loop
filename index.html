{ name: "Faillite d'un fournisseur", effect: () => { gameState.money -= 300; log("üí∏ Faillite d'un fournisseur ! Co√ªts augment√©s -300‚Ç¨"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Fuite d'informations", effect: () => { gameState.money -= 500; log("üï≥Ô∏è Fuite d'informations strat√©giques ! -500‚Ç¨"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Piratage informatique", effect: () => { gameState.money -= 700; log("üè¥‚Äç‚ò†Ô∏è Piratage informatique ! -700‚Ç¨"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Subvention publique", effect: () => { gameState.money += 1200; log("üèõÔ∏è Subvention publique exceptionnelle ! +1200‚Ç¨"); }, minClicks: 1000, maxClicks: 3000, probability: 0.03 },
      { name: "D√©couverte march√© niche", effect: () => { gameState.money += 800; log("üéØ D√©couverte d'un march√© de niche ! +800‚Ç¨"); }, minClicks: 1000, maxClicks: 3000, probability: 0.03 },
      { name: "Concurrent apparition", effect: () => { gameState.productionMultiplier *= 0.85; log("üè¢ Apparition d'un concurrent ! Production -15%"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Scandale m√©diatique", effect: () => { gameState.confort -= 20; gameState.money -= 400; log("üì∫ Scandale m√©diatique ! Confort -20 et -400‚Ç¨"); }, minClicks: 1000, maxClicks: 3000, probability: 0.03 },
      { name: "Campagne pub virale", effect: () => { gameState.money += 900; log("üì± Campagne de pub virale ! +900‚Ç¨"); }, minClicks: 1000, maxClicks: 3000, probability: 0.03 },
      { name: "D√©mission employ√©-cl√©", effect: () => { gameState.productionMultiplier *= 0.8; log("üëã D√©mission d'un employ√©-cl√© ! Production -20%"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Panne d'√©lectricit√©", effect: () => { gameState.productionMultiplier *= 0.6; log("‚ö° Panne d'√©lectricit√© ! Tout s'arr√™te !"); }, minClicks: 1000, maxClicks: 3000, probability: 0.02 },
      { name: "Investisseur providentiel", effect: () => { gameState.money += 2000; log("üí∞ Investisseur providentiel ! +2000‚Ç¨ mais perte d'autonomie"); }, minClicks: 1000, maxClicks: 3000, probability: 0.02 },
      { name: "Proc√®s en justice", effect: () => { gameState.money -= 1000; gameState.confort -= 15; log("‚öñÔ∏è Proc√®s en justice ! -1000‚Ç¨ et confort -15"); }, minClicks: 1000, maxClicks: 3000, probability: 0.03 },
      { name: "D√©part retraite massive", effect: () => { gameState.productionMultiplier *= 0.75; log("üë¥ D√©part en retraite massive ! Production -25%"); }, minClicks: 1000, maxClicks: 3000, probability: 0.03 },
      { name: "Innovation techno externe", effect: () => { gameState.money += 500; gameState.productionMultiplier *= 1.05; log("üî¨ Innovation technologique externe ! +500‚Ç¨ et production +5%"); }, minClicks: 1000, maxClicks: 3000, probability: 0.03 },
      
      // Phase 4+ (>3000 clics) - Plus fr√©quents et puissants
      { name: "Taux int√©r√™t hausse", effect: () => { gameState.interestRate *= 1.2; log("üìà Taux d'int√©r√™t en hausse ! Cr√©dit plus cher"); }, minClicks: 3000, maxClicks: 999999, probability: 0.05 },
      { name: "Inflation g√©n√©rale", effect: () => { gameState.money *= 0.9; log("üíπ Inflation g√©n√©ralis√©e ! -10% de monnaie"); }, minClicks: 3000, maxClicks: 999999, probability: 0.05 },
      { name: "Demande export", effect: () => { gameState.money += 1500; log("üåç Demande explosive √† l'export ! +1500‚Ç¨"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "March√© satur√©", effect: () => { gameState.productionMultiplier *= 0.7; log("üìä March√© satur√© ! Ventes impossibles"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Gr√®ve transporteurs", effect: () => { gameState.nature -= 20; log("üöö Gr√®ve des transporteurs ! Ressources bloqu√©es"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "R√©compense employeur", effect: () => { gameState.money += 800; gameState.confort += 10; log("üèÜ R√©compense du meilleur employeur ! +800‚Ç¨ et confort +10"); }, minClicks: 3000, maxClicks: 999999, probability: 0.03 },
      { name: "Rumeur produit d√©fectueux", effect: () => { gameState.money -= 600; log("üì¢ Rumeur sur un produit d√©fectueux ! -600‚Ç¨"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Hackathon r√©ussi", effect: () => { gameState.productionMultiplier *= 1.15; log("üíª Hackathon r√©ussi ! Production +15%"); }, minClicks: 3000, maxClicks: 999999, probability: 0.03 },
      { name: "Bug compta", effect: () => { const change = Math.random() > 0.5 ? 400 : -400; gameState.money += change; log(`üìä Bug dans la compta ! ${change > 0 ? '+' : ''}${change}‚Ç¨`); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Perte donn√©es clients", effect: () => { gameState.money -= 1200; gameState.confort -= 25; log("üíæ Perte de donn√©es clients ! -1200‚Ç¨ et confort -25"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Panne serveur", effect: () => { gameState.productionMultiplier *= 0.5; log("üñ•Ô∏è Panne serveur ! Automatisations en pause"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Succ√®s viral r√©seaux", effect: () => { gameState.money += 2000; log("üì± Succ√®s viral sur les r√©seaux ! +2000‚Ç¨"); }, minClicks: 3000, maxClicks: 999999, probability: 0.02 },
      { name: "D√©tournement interne", effect: () => { gameState.money -= 1500; log("üïµÔ∏è D√©tournement interne ! -1500‚Ç¨"); }, minClicks: 3000, maxClicks: 999999, probability: 0.03 },
      { name: "Gr√®ve managers", effect: () => { gameState.productionMultiplier *= 0.6; log("üëî Gr√®ve des managers ! Actions sp√©ciales impossibles"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Rachat concurrent", effect: () => { gameState.money += 3000; gameState.productionMultiplier *= 1.1; log("üè¢ Rachat d'un concurrent ! +3000‚Ç¨ et production +10%"); }, minClicks: 3000, maxClicks: 999999, probability: 0.02 },
      { name: "Nouvel imp√¥t", effect: () => { gameState.money -= 800; log("üèõÔ∏è Nouvel imp√¥t vot√© ! -800‚Ç¨"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Appel offre remport√©", effect: () => { gameState.money += 2500; log("üìÑ Appel d'offre remport√© ! +2500‚Ç¨"); }, minClicks: 3000, maxClicks: 999999, probability: 0.02 },
      { name: "Rumeurs licenciements", effect: () => { gameState.productionMultiplier *= 0.8; gameState.confort -= 15; log("üì∞ Rumeurs de licenciements ! Production -20% et confort -15"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "√âpid√©mie", effect: () => { gameState.productionMultiplier *= 0.7; log("ü¶† √âpid√©mie ! Absent√©isme massif"); }, minClicks: 3000, maxClicks: 999999, probability: 0.03 },
      { name: "Surcharge travail", effect: () => { gameState.productionMultiplier *= 0.75; gameState.confort -= 20; log("üò∞ Surcharge de travail ! Efficacit√© -25% et confort -20"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Oubli √©ch√©ance", effect: () => { gameState.money -= 300; gameState.interestRate *= 1.1; log("üí≥ Oubli d'une √©ch√©ance bancaire ! -300‚Ç¨ et taux +10%"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Coup g√©nie salari√©", effect: () => { gameState.productionMultiplier *= 1.25; log("üí° Coup de g√©nie d'un salari√© ! Production +25%"); }, minClicks: 3000, maxClicks: 999999, probability: 0.02 },
      { name: "Fuite cerveau", effect: () => { gameState.productionMultiplier *= 0.85; log("üß† Fuite de cerveau ! Perte de talents -15%"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Vague candidatures", effect: () => { gameState.productionMultiplier *= 1.1; log("üìù Vague de candidatures spontan√©es ! Recrutement facilit√© +10%"); }, minClicks: 3000, maxClicks: 999999, probability: 0.03 },
      { name: "D√©tournement associ√©", effect: () => { gameState.money -= 2000; log("üí∏ D√©tournement de fonds par un associ√© ! -2000‚Ç¨"); }, minClicks: 3000, maxClicks: 999999, probability: 0.02 },
      { name: "Arnaque commande", effect: () => { gameState.money -= 800; gameState.nature -= 10; log("üé≠ Arnaque √† la commande ! -800‚Ç¨ et ressources perdues"); }, minClicks: 3000, maxClicks: 999999, probability: 0.03 },
      { name: "Gr√®ve SAV", effect: () => { gameState.confort -= 30; log("üìû Gr√®ve du SAV ! Confort -30"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "P√©nurie mat√©riel", effect: () => { gameState.productionMultiplier *= 0.8; gameState.money -= 400; log("üì¶ P√©nurie de mat√©riel ! Production -20% et co√ªts +400‚Ç¨"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Inflation salaires", effect: () => { gameState.money -= 600; log("üí∞ Inflation des salaires ! Co√ªts employ√©s +600‚Ç¨"); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 },
      { name: "Erreur inventaire", effect: () => { const change = Math.random() > 0.5 ? 15 : -15; gameState.nature += change; log(`üìä Erreur d'inventaire ! ${change > 0 ? '+' : ''}${change} ressources`); }, minClicks: 3000, maxClicks: 999999, probability: 0.04 }
    ];

    // Fonctions utilitaires
    function log(message) {
      document.getElementById("message").textContent = message;
    }

    function saveState() {
      // Cette fonction pourrait sauvegarder l'√©tat pour l'annulation
    }

    function updateUI() {
      // Mise √† jour des valeurs affich√©es
      document.getElementById("nature").textContent = Math.floor(gameState.nature);
      document.getElementById("confort").textContent = Math.floor(gameState.confort);
      document.getElementById("production").textContent = Math.floor(gameState.production);
      document.getElementById("money").textContent = Math.floor(gameState.money);
      document.getElementById("clicks").textContent = gameState.clicks;

      // Affichage de la monnaie si active
      if (gameState.hasInitialGift) {
        document.getElementById("money-row").style.display = "block";
        document.getElementById("jauge-money-container").style.display = "flex";
      }

      // Affichage des informations IA
      if (gameState.hasAI) {
        document.getElementById("ia-info").textContent = "IA active";
        document.getElementById("ia-info").style.display = "block";
        document.getElementById("prodauto-wrapper").style.display = "flex";
        document.getElementById("jauge-ia-container").style.display = "flex";
      }

      // Affichage des informations trader
      if (gameState.hasAutoTrader) {
        document.getElementById("venteauto-info").textContent = "Trading auto actif";
        document.getElementById("venteauto-info").style.display = "block";
        document.getElementById("venteauto-wrapper").style.display = "flex";
        document.getElementById("jauge-venteauto-container").style.display = "flex";
      }

      // Affichage des informations confort auto
      if (gameState.hasAutoComfort) {
        document.getElementById("confortauto-info").textContent = "Confort auto actif";
        document.getElementById("confortauto-info").style.display = "block";
        document.getElementById("confortauto-wrapper").style.display = "flex";
        document.getElementById("jauge-confortauto-container").style.display = "flex";
      }

      // Indicateur de prix
      if (gameState.hasPriceIndicator) {
        document.getElementById("price-indicator").classList.remove("hidden");
        const price = Math.max(1, Math.floor(Math.random() * 10 + 5));
        document.getElementById("current-price").textContent = price;
      }

      // Mise √† jour des jauges
      updateGauges();
      
      // V√©rification des d√©verrouillages
      checkUnlocks();

      // Gestion des crises
      checkCrises();
    }

    function updateGauges() {
      // Jauge nature
      const naturePercent = Math.min(100, (gameState.nature / 1000) * 100);
      document.getElementById("jauge-nature").style.width = naturePercent + "%";
      document.getElementById("jauge-nature-txt").textContent = Math.floor(gameState.nature);

      // Jauge confort
      if (gameState.confort > 0) {
        document.getElementById("jauge-confort-container").style.display = "flex";
        const confortPercent = Math.min(100, (gameState.confort / 100) * 100);
        document.getElementById("jauge-confort").style.width = confortPercent + "%";
        document.getElementById("jauge-confort-txt").textContent = Math.floor(gameState.confort);
      }

      // Jauge monnaie
      if (gameState.hasInitialGift) {
        const moneyPercent = Math.min(100, (Math.abs(gameState.money) / 10000) * 100);
        document.getElementById("jauge-money").style.width = moneyPercent + "%";
        document.getElementById("jauge-money-txt").textContent = Math.floor(gameState.money) + "‚Ç¨";
      }

      // Jauges des am√©liorations
      if (gameState.hasAI) {
        const iaPercent = 50; // Valeur fixe pour la d√©mo
        document.getElementById("jauge-ia").style.width = iaPercent + "%";
        document.getElementById("jauge-ia-txt").textContent = "1";
      }

      if (gameState.hasAutoTrader) {
        const traderPercent = 50;
        document.getElementById("jauge-venteauto").style.width = traderPercent + "%";
        document.getElementById("jauge-venteauto-txt").textContent = "1";
      }

      if (gameState.hasAutoComfort) {
        const comfortPercent = 50;
        document.getElementById("jauge-confortauto").style.width = comfortPercent + "%";
        document.getElementById("jauge-confortauto-txt").textContent = "1";
      }

      if (gameState.hasProductionUpgrade) {
        document.getElementById("jauge-tech-container").style.display = "flex";
        const techPercent = 75;
        document.getElementById("jauge-tech").style.width = techPercent + "%";  
        document.getElementById("jauge-tech-txt").textContent = "1";
        document.getElementById("tech-level").textContent = "Niveau tech : 1";
        document.getElementById("tech-level").style.display = "block";
      }

      if (gameState.factories > 0) {
        document.getElementById("jauge-usines-container").style.display = "flex";
        const usinePercent = Math.min(100, (gameState.factories / 10) * 100);
        document.getElementById("jauge-usines").style.width = usinePercent + "%";
        document.getElementById("jauge-usines-txt").textContent = gameState.factories;
      }

      if (gameState.markets > 0) {
        document.getElementById("jauge-marches-container").style.display = "flex";
        const marchePercent = Math.min(100, (gameState.markets / 10) * 100);
        document.getElementById("jauge-marches").style.width = marchePercent + "%";
        document.getElementById("jauge-marches-txt").textContent = gameState.markets;
      }
    }

    function checkUnlocks() {
      // Bouton confort - 180 clics quand monnaie active
      if (gameState.hasInitialGift && gameState.clicks >= 180) {
        document.getElementById("comfort-btn").style.display = "block";
      }

      // IA - 250 clics et r√©appara√Æt tous les 250 suivants apr√®s achat
      if (gameState.clicks >= 250 && !gameState.hasAI) {
        document.getElementById("ouvrier-btn").style.display = "block";
      } else if (gameState.hasAI && gameState.clicks >= gameState.lastAIPurchase + 250) {
        gameState.hasAI = false;
        document.getElementById("ouvrier-btn").style.display = "block";
      }

      // Trader - 500 clics et r√©appara√Æt tous les 500 suivants apr√®s achat  
      if (gameState.clicks >= 500 && !gameState.hasAutoTrader) {
        document.getElementById("trading-btn").style.display = "block";
      } else if (gameState.hasAutoTrader && gameState.clicks >= gameState.lastTraderPurchase + 500) {
        gameState.hasAutoTrader = false;
        document.getElementById("trading-btn").style.display = "block";
      }

      // Am√©lioration production - 600 clics et r√©appara√Æt tous les 600 suivants
      if (gameState.clicks >= 600 && !gameState.hasProductionUpgrade) {
        document.getElementById("upgrade-btn2").style.display = "block";
      } else if (gameState.hasProductionUpgrade && gameState.clicks >= gameState.lastProductionUpgrade + 600) {
        gameState.hasProductionUpgrade = false;
        document.getElementById("upgrade-btn2").style.display = "block";
      }

      // Confort auto - 900 clics et r√©appara√Æt tous les 900 suivants
      if (gameState.clicks >= 900 && !gameState.hasAutoComfort) {
        document.getElementById("confort-auto-btn").classList.remove("hidden");
      } else if (gameState.hasAutoComfort && gameState.clicks >= gameState.lastComfortAutoPurchase + 900) {
        gameState.hasAutoComfort = false;
        document.getElementById("confort-auto-btn").classList.remove("hidden");
      }

      // Indicateur de prix - 1000 clics, une seule fois
      if (gameState.clicks >= 1000 && !gameState.hasPriceIndicator) {
        document.getElementById("price-indicator-btn").classList.remove("hidden");
      }

      // Auto clics - 750 clics, une seule fois
      if (gameState.clicks >= 750 && !gameState.autoCountsAsClicks) {
        document.getElementById("auto-clicks-btn").classList.remove("hidden");
      }

      // Usines - 1500 clics et r√©appara√Æt tous les 1500 suivants
      if (gameState.clicks >= 1500 && gameState.clicks >= gameState.lastFactoryPurchase + 1500) {
        document.getElementById("factory-btn").classList.remove("hidden");
      }

      // March√©s - 1600 clics et r√©appara√Æt tous les 1600 suivants
      if (gameState.clicks >= 1600 && gameState.clicks >= gameState.lastMarketPurchase + 1600) {
        document.getElementById("trading-market-btn").classList.remove("hidden");
      }

      // N√©gociation taux - 3000 clics max 4 fois
      if (gameState.clicks >= 3000 && gameState.interestNegotiations < 4) {
        document.getElementById("negocier-btn").style.display = "block";
        document.getElementById("taux-info").style.display = "block";
        document.getElementById("jauge-taux-container").style.display = "flex";
      }
    }

    function checkCrises() {
      // Crise √©cologique
      const criseBox = document.getElementById("alert-crise");
      if (gameState.nature < 50) {
        criseBox.style.display = "block";
        criseBox.textContent = "Crise √©cologique : ressources critiques !";
      } else {
        criseBox.style.display = "none";
      }

      // Crise sociale
      const socialBox = document.getElementById("social-crise");
      if (gameState.confort < 10 && gameState.confort > 0) {
        socialBox.style.display = "block";
        socialBox.textContent = "Crise sociale - risque de r√©volution";
      } else {
        socialBox.style.display = "none";
      }

      // R√©volution
      const revolutionBox = document.getElementById("revolution");
      if (gameState.confort <= 0 && gameState.hasInitialGift) {
        revolutionBox.style.display = "block";
        revolutionBox.textContent = "R√âVOLUTION - FIN DE JEU";
      } else {
        revolutionBox.style.display = "none";
      }
    }

    function checkRandomEvent() {
      // Fr√©quence selon la phase
      let eventChance = 0.02; // Base 2%
      if (gameState.clicks > 3000) eventChance = 0.08; // 8% apr√®s 3000 clics
      else if (gameState.clicks > 1000) eventChance = 0.05; // 5% apr√®s 1000 clics  
      else if (gameState.clicks > 500) eventChance = 0.03; // 3% apr√®s 500 clics

      if (Math.random() < eventChance && gameState.clicks - gameState.lastEventClick > 50) {
        const possibleEvents = randomEvents.filter(event => 
          gameState.clicks >= event.minClicks && 
          gameState.clicks <= event.maxClicks &&
          Math.random() < event.probability
        );

        if (possibleEvents.length > 0) {
          const randomEvent = possibleEvents[Math.floor(Math.random() * possibleEvents.length)];
          randomEvent.effect();
          gameState.lastEventClick = gameState.clicks;
          
          // Affichage de l'√©v√©nement
          displayEvent(randomEvent.name, "");
        }
      }
    }

    function displayEvent(title, description) {
      const eventDisplay = document.getElementById('event-display');
      const eventTitle = document.getElementById('event-title');
      const eventDescription = document.getElementById('event-description');

      eventTitle.textContent = title;
      eventDescription.textContent = description;
      eventDisplay.style.display = 'block';

      setTimeout(() => {
        eventDisplay.style.display = 'none';
      }, 4000);
    }

    // Fonctions principales du jeu
    function receiveDon() {
      saveState();
      gameState.money += 1000;
      gameState.hasInitialGift = true;
      gameState.clicks++;
      
      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      document.getElementById("confort-auto-btn").classList.add("hidden");
      
      // D√©marrer l'achat confort automatique
      startAutoComfort();

      log("üõãÔ∏è Achat confort automatique activ√© !");
      checkRandomEvent();
      updateUI();
    }

    function upgradeProd2() {
      if (gameState.money < 2000) {
        log("‚ùå Pas assez d'argent pour am√©liorer la production (2000‚Ç¨ requis)");
        return;
      }

      saveState();
      gameState.money -= 2000;
      gameState.hasProductionUpgrade = true;
      gameState.lastProductionUpgrade = gameState.clicks;
      gameState.productionMultiplier *= 1.5;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      document.getElementById("upgrade-btn2").style.display = "none";

      log("üí† Production am√©lior√©e ! Multiplicateur √ó1.5");
      checkRandomEvent();
      updateUI();
    }

    function acheterUsine() {
      if (gameState.money < 20000) {
        log("‚ùå Pas assez d'argent pour acheter une usine (20 000‚Ç¨ requis)");
        return;
      }

      saveState();
      gameState.money -= 20000;
      gameState.productionMultiplier *= 10;
      gameState.factories++;
      gameState.lastFactoryPurchase = gameState.clicks;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      document.getElementById("factory-btn").classList.add("hidden");

      log("üè≠ Usine de production achet√©e ! Production √ó10");
      checkRandomEvent();
      updateUI();
    }

    function acheterMarcheTrading() {
      if (gameState.money < 20000) {
        log("‚ùå Pas assez d'argent pour acheter un march√© de trading (20 000‚Ç¨ requis)");
        return;
      }

      saveState();
      gameState.money -= 20000;
      gameState.salesMultiplier *= 10;
      gameState.markets++;
      gameState.lastMarketPurchase = gameState.clicks;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      document.getElementById("trading-market-btn").classList.add("hidden");

      log("üìà March√© de trading achet√© ! Ventes √ó10");
      checkRandomEvent();
      updateUI();
    }

    function acheterIndicateurPrix() {
      if (gameState.money < 30000) {
        log("‚ùå Pas assez d'argent pour acheter l'indicateur de prix (30 000‚Ç¨ requis)");
        return;
      }

      saveState();
      gameState.money -= 30000;
      gameState.hasPriceIndicator = true;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      document.getElementById("price-indicator-btn").classList.add("hidden");

      log("üìä Indicateur de prix achet√© ! Meilleurs prix de vente !");
      checkRandomEvent();
      updateUI();
    }

    function acheterAutoClicks() {
      if (gameState.money < 10000) {
        log("‚ùå Pas assez d'argent pour l'automatisation compl√®te (10 000‚Ç¨ requis)");
        return;
      }

      saveState();
      gameState.money -= 10000;
      gameState.autoCountsAsClicks = true;
      gameState.clicks++;

      document.getElementById("auto-clicks-btn").classList.add("hidden");

      log("‚öôÔ∏è Automatisation compl√®te activ√©e ! Les automatismes comptent comme des clics");
      checkRandomEvent();
      updateUI();
    }

    function negocierTaux() {
      if (gameState.interestNegotiations >= 4) {
        log("‚ùå Nombre maximum de n√©gociations atteint");
        return;
      }

      if (gameState.confort < 20) {
        log("‚ùå Pas assez de confort pour n√©gocier (20 requis)");
        return;
      }

      saveState();
      gameState.confort -= 20;
      gameState.interestRate = Math.max(1, gameState.interestRate - 1);
      gameState.interestNegotiations++;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      log(`üìâ Taux n√©goci√© √† ${gameState.interestRate}% (co√ªt: 20 confort)`);
      checkRandomEvent();
      updateUI();
    }

    // Fonctions d'automatisation
    function startAutoProduction() {
      if (gameState.iaActive) {
        setInterval(() => {
          if (gameState.hasAI && gameState.nature >= 5) {
            const cost = 5;
            const productionAmount = Math.floor(gameState.productionMultiplier);
            
            gameState.nature -= cost;
            gameState.production += productionAmount;
            gameState.confort += productionAmount;
            
            if (gameState.autoCountsAsClicks) {
              gameState.clicks++;
            }
            
            updateUI();
          }
        }, 3000);
      }
    }

    function startAutoTrading() {
      if (gameState.traderActive) {
        setInterval(() => {
          if (gameState.hasAutoTrader && gameState.production > 0) {
            const sellAmount = Math.min(gameState.production, Math.floor(gameState.salesMultiplier));
            const price = gameState.hasPriceIndicator ? Math.random() * 15 + 10 : Math.random() * 10 + 5;
            const earnings = Math.floor(sellAmount * price);

            gameState.production -= sellAmount;
            gameState.money += earnings;
            
            if (gameState.autoCountsAsClicks) {
              gameState.clicks++;
            }
            
            updateUI();
          }
        }, 4000);
      }
    }

    function startAutoComfort() {
      if (gameState.comfortAutoActive) {
        setInterval(() => {
          if (gameState.hasAutoComfort && gameState.money >= 50) {
            gameState.money -= 50;
            gameState.confort += 1;
            
            if (gameState.autoCountsAsClicks) {
              gameState.clicks++;
            }
            
            updateUI();
          }
        }, 15000);
      }
    }

    // Fonctions de contr√¥le des automatismes
    function toggleProdAuto() {
      gameState.iaActive = !gameState.iaActive;
      const btn = document.getElementById("prodauto-btn");
      if (gameState.iaActive) {
        btn.textContent = "Production auto : ON";
        btn.classList.add("on");
      } else {
        btn.textContent = "Production auto : OFF";
        btn.classList.remove("on");
      }
    }

    function toggleVenteAuto() {
      gameState.traderActive = !gameState.traderActive;
      const btn = document.getElementById("venteauto-btn");
      if (gameState.traderActive) {
        btn.textContent = "Vente auto : ON";
        btn.classList.add("on");
      } else {
        btn.textContent = "Vente auto : OFF";
        btn.classList.remove("on");
      }
    }

    function toggleConfortAuto() {
      gameState.comfortAutoActive = !gameState.comfortAutoActive;
      const btn = document.getElementById("confortauto-btn");
      if (gameState.comfortAutoActive) {
        btn.textContent = "Confort auto : ON";
        btn.classList.add("on");
      } else {
        btn.textContent = "Confort auto : OFF";
        btn.classList.remove("on");
      }
    }

    // Gestion des int√©r√™ts sur la dette
    function handleDebt() {
      if (gameState.money < 0) {
        const interest = Math.abs(gameState.money) * (gameState.interestRate / 100);
        gameState.money -= interest;
        
        if (Math.random() < 0.1) {
          log(`üí≥ Int√©r√™ts sur la dette : -${Math.floor(interest)}‚Ç¨`);
        }
      }
    }

    // Initialisation du jeu
    function initGame() {
      updateUI();
      
      // Gestion automatique de la dette
      setInterval(handleDebt, 10000);
      
      log("üéÆ Bienvenue dans Looop ! Cliquez sur 'Recevoir mon don' pour commencer");
    }

    // D√©marrage du jeu
    initGame();
  </script>
</body>
</html>State.clicks++;
      }

      document.getElementById("don-btn").style.display = "none";
      log("üéÅ Don re√ßu ! +1000‚Ç¨");
      checkRandomEvent();
      updateUI();
    }

    function produce() {
      if (gameState.nature < 5) {
        log("‚ùå Pas assez de ressources pour produire !");
        return;
      }

      saveState();
      const cost = 5;
      const productionAmount = Math.floor(gameState.productionMultiplier);
      
      gameState.nature -= cost;
      gameState.production += productionAmount;
      gameState.confort += productionAmount;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      log(`üõ†Ô∏è Production : +${productionAmount} produits`);
      checkRandomEvent();
      updateUI();
    }

    function sell() {
      if (gameState.production <= 0) {
        log("‚ùå Aucun produit √† vendre !");
        return;
      }

      saveState();
      const sellAmount = Math.min(gameState.production, Math.floor(gameState.salesMultiplier));
      const price = gameState.hasPriceIndicator ? Math.random() * 15 + 10 : Math.random() * 10 + 5;
      const earnings = Math.floor(sellAmount * price);

      gameState.production -= sellAmount;  
      gameState.money += earnings;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      log(`üí∂ Vente : +${earnings}‚Ç¨ (${sellAmount} produits)`);
      checkRandomEvent();
      updateUI();
    }

    function acheterConfort() {
      if (gameState.money < 50) {
        log("‚ùå Pas assez d'argent pour acheter du confort (50‚Ç¨ requis)");
        return; 
      }

      saveState();
      gameState.money -= 50;
      gameState.confort += 1;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      log("üõãÔ∏è Confort achet√© : +1 confort");
      checkRandomEvent();
      updateUI();
    }

    function acheterIA() {
      if (gameState.money < 500) {
        log("‚ùå Pas assez d'argent pour engager une IA (500‚Ç¨ requis)");
        return;
      }

      saveState();
      gameState.money -= 500;
      gameState.hasAI = true;
      gameState.lastAIPurchase = gameState.clicks;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      document.getElementById("ouvrier-btn").style.display = "none";
      
      // D√©marrer la production automatique
      startAutoProduction();
      
      log("ü§ñ IA engag√©e ! Production automatique activ√©e");
      checkRandomEvent();
      updateUI();
    }

    function acheterTrader() {
      if (gameState.money < 1000) {
        log("‚ùå Pas assez d'argent pour acheter un trader automatique (1000‚Ç¨ requis)");
        return;
      }

      saveState(); 
      gameState.money -= 1000;
      gameState.hasAutoTrader = true;
      gameState.lastTraderPurchase = gameState.clicks;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        gameState.clicks++;
      }

      document.getElementById("trading-btn").style.display = "none";
      
      // D√©marrer la vente automatique
      startAutoTrading();

      log("üè™ Trader automatique achet√© ! Vente automatique activ√©e");
      checkRandomEvent();
      updateUI();
    }

    function acheterConfortAuto() {
      if (gameState.money < 1500) {
        log("‚ùå Pas assez d'argent pour l'achat confort automatique (1500‚Ç¨ requis)");
        return;
      }

      saveState();
      gameState.money -= 1500;
      gameState.hasAutoComfort = true;
      gameState.lastComfortAutoPurchase = gameState.clicks;
      gameState.clicks++;

      if (gameState.autoCountsAsClicks) {
        game<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Looop v1.15.3 ‚Äì plan game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { background: #f3f3f3; font-family: sans-serif; margin:0; padding:0; }
    h1 { text-align: center; margin: 25px 0 10px; }
    .container { display: flex; justify-content: center; align-items: flex-start; margin: 0 auto 18px auto; max-width: 950px; gap: 24px;}
    .category { background: #fff; border-radius: 18px; box-shadow: 0 4px 24px #0001; flex: 1; padding: 32px 18px 18px 18px; margin: 0 6px; min-width: 250px; max-width: 320px; min-height: 250px; display: flex; flex-direction: column; align-items: center;}
    .cat-title { font-size: 1.25em; margin-bottom: 20px; font-weight: bold; letter-spacing: 1px;}
    .stock { font-size: 1.1em; margin-bottom: 10px;}
    .products-box { background: #f7f7fa; border: 2px solid #dde1eb; border-radius: 10px; color: #333; margin-bottom: 10px; padding: 10px 28px; font-size: 1.2em; font-weight: bold; letter-spacing: 1px; box-shadow: 0 1px 4px #ddd5; min-width: 110px; text-align: center;}
    .message-box { border-radius: 10px; margin: 8px 0 14px 0; padding: 11px 14px 11px 14px; font-weight: bold; font-size: 1.08em; box-shadow: 0 1px 4px #0002; text-align: center; min-width: 130px; max-width: 260px; word-break: break-word; line-height: 1.25em;}
    .msg-orange { background: #ffe9cf; color: #d2691e; border: 2px solid #f5c387;}
    .msg-blue { background: #e7f4ff; color: #0978c6; border: 2px solid #7cc8fa;}
    .msg-red { background: #ffe3e3; color: #c00; border: 2px solid #e48888;}
    .msg-brown { background: #fff4d6; color: #be8c00; border: 2px solid #e2c071;}
    .msg-purple { background: #f3e5f5; color: #7b1fa2; border: 2px solid #ce93d8;}
    .msg-green { background: #e8f5e8; color: #2e7d32; border: 2px solid #81c784;}
    .btn-row { margin: 18px 0 0 0;}
    button { font-size: 1em; padding: 10px 18px; margin: 5px 0; border-radius: 14px; border: none; background: #ededed; color: #111; cursor: pointer; transition: background 0.2s;}
    button:disabled { opacity: 0.5; background: #ededed; color: #bbb; cursor: not-allowed;}
    .btn-prodauto { background: #094075; color: #fff; font-weight: bold; border-radius: 8px;}
    .btn-prodauto.on { background: #094075; color: #fff; }
    .btn-venteauto { background: #f9c9e6; color: #a52b74; font-weight: bold; margin-right: 10px; border-radius: 8px;}
    .btn-venteauto.on { background: #ea6bbd; color: #fff;}
    .btn-confortauto { background: #86b6ea; color: #fff; font-weight: bold; margin-right: 10px; border-radius: 8px;}
    .btn-confortauto.on { background: #86b6ea; color: #fff;}
    .btn-trading { background: #ededed; color: #111; font-weight: normal; border: none; border-radius: 14px; font-size: 1.08em; padding: 10px 18px; margin: 5px 0; cursor: pointer; box-shadow: 0 1px 2px #0001; transition: background 0.2s; display: inline-block;}
    .btn-trading:disabled { background: #ededed; color: #bbb; cursor: not-allowed;}
    .btn-primary { background: #2976d9; color: #fff; font-weight: bold; }
    .btn-yellow { background: #FFD600; color: #222; font-weight: bold;}
    .btn-green  { background: #4fd860; color: #fff; font-weight: bold;}
    .btn-annuler { background: #aaa; color: #fff; }
    .btn-upgrade { background: #28a745; color: #fff; font-weight: bold; }
    .debug-row { margin: 0 0 32px 0; display: flex; justify-content: center; gap: 10px;}
    .message { font-weight: bold; min-height: 24px; margin: 10px 0;}
    #prodauto-row { width:100%; display:flex; justify-content: center; align-items: center; gap:12px; margin: 26px 0 18px 0;}
    #prodauto-wrapper, #venteauto-wrapper, #confortauto-wrapper, #prixrelatif-wrapper { display: flex; }
    @media (max-width: 900px) { #prodauto-row { margin: 16px 0 10px 0;} }
    #clics-container { text-align: center; margin: 25px 0 0 0; font-size: 1.2em; font-weight: bold; color: #333;}
    #revolution { color: #b10000; font-size: 1.1em; text-transform: uppercase;}
    #tech-level, #ia-info { font-size:1em; color:#2980b9; margin-bottom: 0; font-weight: normal;}
    #venteauto-info { font-size: 1.03em; color: #ea6bbd; margin: 2px 0 0 0; font-weight: normal;}
    #confortauto-info { font-size: 1.03em; color: #86b6ea; margin: 2px 0 0 0; font-weight: normal;}
    #triche-sep { border: none; border-top: 3px solid #222; margin: 38px auto 12px auto; width: 94vw; max-width: 1000px;}
    #triche-label { text-align: left; font-size:1.13em; font-weight:normal; letter-spacing:1px; margin: 0 0 12px 0; color:#111; width: 95vw; max-width: 1000px; margin-left: auto; margin-right: auto;}
    #don-btn { margin-top: 10px; background: #FFD600; color: #222; font-weight: bold; border: none; border-radius: 8px; font-size: 1.1em; padding: 14px 20px; box-shadow: 0 1px 8px #fffdbe99;}
    .jauge-bottom-barre { margin: 0 auto 6px auto; display: flex; flex-direction: row; align-items: center; gap: 8px; max-width: 600px;}
    .jauge-bottom-label { min-width: 70px; font-size: .99em; color: #888; text-align: right;}
    .jauge-bottom-bar { background: #eee; border-radius: 8px; height: 13px; flex: 1; overflow: hidden; position: relative;}
    .jauge-bottom-fill { height: 100%; border-radius: 8px; transition: width 0.19s;}
    #jauge-nature { background: #86e08e;}
    #jauge-confort { background: #86b6ea;}
    #jauge-money { background: #ffb3b3;}
    #jauge-ia { background: #094075;}
    #jauge-tech { background: #ba9afc;}
    #jauge-venteauto { background: #fd90d9;}
    #jauge-confortauto { background: #86b6ea;}
    #jauge-taux { background: #9b59b6;}
    #jauge-budget { background: #f9e79f;}
    #jauge-usines { background: #ff5722;}
    #jauge-marches { background: #795548;}
    #jauge-centres { background: #86b6ea;}
    .btn-bercy { background: #f39c12; color: #fff; font-weight: bold; border-radius: 8px; margin-left: 10px; padding: 6px 12px; font-size: 0.9em;}
    .btn-bercy.on { background: #f39c12; color: #fff; }
    .btn-bercy.off { background: #bdc3c7; color: #7f8c8d; }
    .btn-negocier { background: #9b59b6; color: #fff; font-weight: bold; border-radius: 8px; opacity: 0.6; font-size: 1em; position: relative;}
    .btn-negocier.active { background: #9b59b6; color: #fff; opacity: 1;}
    #negocier-cost { display: block; font-size: 0.89em; opacity: 0.82; line-height: 1.1em; font-weight: normal; color: #e4d9fa;}
    #taux-info { font-size: 1.03em; color: #9b59b6; margin: 2px 0 0 0; font-weight: normal;}
    .jauge-bottom-val { font-size: .97em; color: #666; min-width: 60px; text-align: left; padding-left: 4px; }
    
    /* Nouvelles fonctionnalit√©s */
    .btn-factory { background: #ff5722; color: #fff; font-weight: bold; border-radius: 8px;}
    .btn-trading-market { background: #795548; color: #fff; font-weight: bold; border-radius: 8px;}
    .btn-price-indicator { background: #607d8b; color: #fff; font-weight: bold; border-radius: 8px;}
    .btn-auto-clicks { background: #9c27b0; color: #fff; font-weight: bold; border-radius: 8px;}
    .btn-prixrelatif { background: #607d8b; color: #fff; font-weight: bold; border-radius: 8px;}
    .btn-prixrelatif.on { background: #607d8b; color: #fff; }
    .btn-centre-commercial { background: #86b6ea; color: #fff; font-weight: bold; border-radius: 8px;}
    
    .price-indicator { background: #f7f7fa; border: 2px solid #dde1eb; border-radius: 10px; padding: 10px; margin: 10px 0; text-align: center;}
    .hidden { display: none; }
    
    /* √âv√©nements al√©atoires */
    #event-display { position: fixed; top: 20px; right: 20px; max-width: 300px; z-index: 1000; background: rgba(255,255,255,0.95); border-radius: 10px; padding: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); border-left: 5px solid #ff6b35; display: none; animation: slideIn 0.5s ease;}
    @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    #event-title { font-weight: bold; color: #333; margin-bottom: 8px; font-size: 1.1em;}
    #event-description { color: #666; font-size: 0.95em; line-height: 1.3;}
    
    @media (max-width: 700px) {
      .container { flex-direction: column; align-items: stretch; gap: 12px;}
      .category { max-width: none; min-width: 0; margin: 0 0 20px 0; padding: 18px 10px 12px 10px;}
      .products-box, .message-box { min-width: 0; font-size: 1.04em; padding: 8px 4px;}
      #clics-container { font-size: 1.05em;}
      button { width: 96%; max-width: 340px; font-size: 1em; margin-left: auto; margin-right: auto;}
      .debug-row { flex-direction: column; gap: 6px;}
      #triche-label { font-size:1em; margin-left: 4vw;}
      h1 { font-size: 1.16em;}
      .jauge-bottom-barre { max-width: 98vw; }
      .jauge-bottom-label, .jauge-bottom-val { font-size: 0.91em; }
      #prodauto-row { flex-direction:column; gap:8px;}
      #event-display { position: static; max-width: none; margin: 10px; }
    }
  </style>
</head>
<body>
  <!-- Affichage des √©v√©nements al√©atoires -->
  <div id="event-display">
    <div id="event-title"></div>
    <div id="event-description"></div>
  </div>

  <h1>üåç Looop <span style="font-size:0.7em;color:#777;">v1.12+</span></h1>
  <div class="container">
    <div class="category">
      <div class="cat-title">üå± Environnement</div>
      <div class="stock">Ressources : <span id="nature">300</span></div>
      <div id="alert-crise" class="message-box msg-orange" style="display:none;"></div>
      <div class="btn-row">
        <button id="produce-btn" onclick="produce()">üõ†Ô∏è Produire</button>
      </div>
    </div>
    <div class="category">
      <div class="cat-title">ü§ñ Exosomatisation</div>
      <div class="stock">Confort : <span id="confort">0</span></div>
      <div class="products-box">
        Produits cr√©√©s<br>
        <span id="production">0</span>
      </div>
      <div class="stock" id="tech-level" style="display:none;"></div>
      <div class="stock" id="ia-info" style="display:none;"></div>
      <div id="venteauto-info" style="display:none;"></div>
      <div id="confortauto-info" style="display:none;"></div>
      <div id="social-crise" class="message-box msg-brown" style="display:none;"></div>
      <div class="btn-row">
        <button id="comfort-btn" onclick="acheterConfort()" style="display:none;">üõãÔ∏è Acheter confort (+1) - 50‚Ç¨</button>
        <button id="sell-btn" onclick="sell()">üí∂ Vente</button>
      </div>
    </div>
    <div class="category">
      <div class="cat-title">üí∂ √âconomie</div>
      <div class="stock" id="money-row" style="display:none;">
        Monnaie (‚Ç¨) : <span id="money">10</span>
      </div>
      <div id="taux-info" style="display:none;"></div>
      
      <!-- Indicateur de prix -->
      <div id="price-indicator" class="price-indicator hidden">
        <strong>üìä Prix: <span id="current-price">0</span>‚Ç¨/unit√© de production</strong>
      </div>
      
      <button id="don-btn" onclick="receiveDon()">üéÅ Recevoir mon don</button>
      <div id="eh-msg" class="message-box msg-blue" style="display:none;"></div>
      <div class="btn-row">
        <button id="ouvrier-btn" class="btn-upgrade" onclick="acheterIA()" style="display:none;">ü§ñ Engager une IA (500 ‚Ç¨)</button>
        <button id="trading-btn" class="btn-upgrade" onclick="acheterTrader()" style="display:none;">üè™ Acheter un trader auto (1000 ‚Ç¨)</button>
        <button id="confort-auto-btn" class="btn-confortauto hidden" onclick="acheterConfortAuto()">üõãÔ∏è Achat confort auto - 1500‚Ç¨</button>
        <button id="upgrade-btn2" class="btn-upgrade" onclick="upgradeProd2()" style="display:none;">üí† Am√©liorer la production (2 000 ‚Ç¨)</button>
        
        <!-- Nouvelles fonctionnalit√©s -->
        <button id="factory-btn" class="btn-factory hidden" onclick="acheterUsine()">üè≠ Usine de Production (√ó10) - 20 000 ‚Ç¨</button>
        <button id="trading-market-btn" class="btn-trading-market hidden" onclick="acheterMarcheTrading()">üìà March√© de Trading (√ó10 vente) - 20 000 ‚Ç¨</button>
        <button id="price-indicator-btn" class="btn-price-indicator hidden" onclick="acheterIndicateurPrix()">üìä Indicateur de Prix - 30 000 ‚Ç¨</button>
        <button id="auto-clicks-btn" class="btn-auto-clicks hidden" onclick="acheterAutoClicks()">‚öôÔ∏è Les automatismes comptent comme des clics - 10 000 ‚Ç¨</button>
        
        <button id="negocier-btn" class="btn-negocier" onclick="negocierTaux()" style="display:none;">
          üìâ N√©gocier son taux d'int√©r√™t
          <span id="negocier-cost"></span>
        </button>
      </div>
    </div>
  </div>
  
  <div id="prodauto-row">
    <div id="venteauto-wrapper" style="display:none;">
      <button id="venteauto-btn" class="btn-venteauto on" onclick="toggleVenteAuto()">Vente auto : ON</button>
    </div>
    <div id="confortauto-wrapper" style="display:none;">
      <button id="confortauto-btn" class="btn-confortauto on" onclick="toggleConfortAuto()">Confort auto : ON</button>
    </div>
    <div id="prodauto-wrapper" style="display:none;">
      <button id="prodauto-btn" class="btn-prodauto on" onclick="toggleProdAuto()">Production auto : ON</button>
    </div>
  </div>
  
  <div style="margin: 0 auto 14px auto; max-width:620px;">
    <div class="jauge-bottom-barre">
      <div class="jauge-bottom-label">üå± Ressources</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-nature"></div></div>
      <div class="jauge-bottom-val" id="jauge-nature-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-confort-container" style="display:none;">
      <div class="jauge-bottom-label">ü§ñ Confort</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-confort"></div></div>
      <div class="jauge-bottom-val" id="jauge-confort-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-money-container" style="display:none;">
      <div class="jauge-bottom-label">üí∂ Monnaie</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-money"></div></div>
      <div class="jauge-bottom-val" id="jauge-money-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-taux-container" style="display:none;">
      <div class="jauge-bottom-label">üìâ Taux int√©r√™t</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-taux"></div></div>
      <div class="jauge-bottom-val" id="jauge-taux-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-ia-container" style="display:none;">
      <div class="jauge-bottom-label">ü§ñ IA</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-ia"></div></div>
      <div class="jauge-bottom-val" id="jauge-ia-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-venteauto-container" style="display:none;">
      <div class="jauge-bottom-label">üè™ Vente auto</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-venteauto"></div></div>
      <div class="jauge-bottom-val" id="jauge-venteauto-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-confortauto-container" style="display:none;">
      <div class="jauge-bottom-label">üõãÔ∏è Confort auto</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-confortauto"></div></div>
      <div class="jauge-bottom-val" id="jauge-confortauto-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-tech-container" style="display:none;">
      <div class="jauge-bottom-label">üß™ Technologie</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-tech"></div></div>
      <div class="jauge-bottom-val" id="jauge-tech-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-usines-container" style="display:none;">
      <div class="jauge-bottom-label">üè≠ Usines</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-usines"></div></div>
      <div class="jauge-bottom-val" id="jauge-usines-txt"></div>
    </div>
    <div class="jauge-bottom-barre" id="jauge-marches-container" style="display:none;">
      <div class="jauge-bottom-label">üìà March√©s</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-marches"></div></div>
      <div class="jauge-bottom-val" id="jauge-marches-txt"></div>
    </div>
  </div>
  
  <div id="revolution" class="message-box msg-red" style="display:none;"></div>
  <div class="message" id="message"></div>
  <div id="clics-container">Clics/actions : <span id="clicks">0</span></div>

  <script>
    // √âtat du jeu
    const gameState = {
      nature: 300,
      confort: 0,
      production: 0,
      money: 10,
      clicks: 0,
      hasInitialGift: false,
      hasAI: false,
      hasAutoTrader: false,
      hasProductionUpgrade: false,
      hasAutoComfort: false,
      debt: 0,
      interestRate: 5,
      productionMultiplier: 1,
      salesMultiplier: 1,
      factories: 0,
      markets: 0,
      autoCountsAsClicks: false,
      hasPriceIndicator: false,
      interestNegotiations: 0,
      lastEventClick: 0,
      iaActive: true,
      traderActive: true,
      comfortAutoActive: true,
      
      // Variables pour les cycles de r√©apparition
      lastAIPurchase: 0,
      lastTraderPurchase: 0,
      lastProductionUpgrade: 0,
      lastComfortAutoPurchase: 0,
      lastFactoryPurchase: 0,
      lastMarketPurchase: 0
    };

    // Liste compl√®te des √©v√©nements al√©atoires selon votre document
    const randomEvents = [
      // Phase 1 (0-500 clics) - Rares et plut√¥t positifs
      { name: "Prime exceptionnelle", effect: () => { gameState.money += 200; log("üìà Prime exceptionnelle re√ßue ! +200‚Ç¨"); }, minClicks: 0, maxClicks: 500, probability: 0.02 },
      { name: "Ru√©e des clients", effect: () => { gameState.money += 300; log("üèÉ‚Äç‚ôÇÔ∏è Ru√©e des clients ! +300‚Ç¨"); }, minClicks: 0, maxClicks: 500, probability: 0.02 },
      { name: "Recrutement √©clair", effect: () => { gameState.productionMultiplier *= 1.1; log("‚ö° Recrutement √©clair ! Production +10%"); }, minClicks: 0, maxClicks: 500, probability: 0.02 },
      
      // Phase 2 (250-1000 clics)
      { name: "Bug logiciel", effect: () => { gameState.productionMultiplier *= 0.9; log("üêõ Bug logiciel ! Production -10%"); }, minClicks: 250, maxClicks: 1000, probability: 0.03 },
      { name: "Embauche talentueuse", effect: () => { gameState.productionMultiplier *= 1.2; log("üåü Embauche d'un employ√© talentueux ! Production +20%"); }, minClicks: 250, maxClicks: 1000, probability: 0.03 },
      { name: "Panne informatique", effect: () => { gameState.productionMultiplier *= 0.8; log("üíª Panne informatique ! Production ralentie"); }, minClicks: 250, maxClicks: 1000, probability: 0.03 },
      { name: "Contr√¥le fiscal", effect: () => { gameState.money -= 500; log("üïµÔ∏è Contr√¥le fiscal ! -500‚Ç¨"); }, minClicks: 500, maxClicks: 1000, probability: 0.03 },
      { name: "Rupture de stock", effect: () => { gameState.nature = Math.max(0, gameState.nature - 10); log("üì¶ Rupture de stock temporaire !"); }, minClicks: 500, maxClicks: 1000, probability: 0.03 },
      { name: "Perte de donn√©es", effect: () => { gameState.money -= 300; log("üíæ Perte de donn√©es ! -300‚Ç¨"); }, minClicks: 500, maxClicks: 1000, probability: 0.03 },
      { name: "Audit surprise", effect: () => { gameState.money -= 400; log("üìä Audit surprise ! -400‚Ç¨"); }, minClicks: 500, maxClicks: 1000, probability: 0.03 },
      { name: "Gr√®ve du personnel", effect: () => { gameState.productionMultiplier *= 0.7; log("‚úä Gr√®ve du personnel ! Production r√©duite"); }, minClicks: 500, maxClicks: 1000, probability: 0.03 },
      { name: "Innovation externe", effect: () => { gameState.money += 600; log("üí° Innovation externe profitable ! +600‚Ç¨"); }, minClicks: 500, maxClicks: 1000, probability: 0.03 },
      
      // Phase 3 (1000-3000 clics)
      { name: "Fusion d'entreprise", effect: () => { gameState.productionMultiplier *= 1.1; gameState.money += 1000; log("ü§ù Fusion d'entreprise ! Production +10% et +1000‚Ç¨"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Perte de brevet", effect: () => { gameState.productionMultiplier *= 0.85; log("üìÑ Perte de brevet ! Co√ªt de production augment√©"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Crash boursier", effect: () => { gameState.money *= 0.8; log("üìâ Crash boursier ! -20% de monnaie"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Commande annul√©e", effect: () => { gameState.nature -= 15; gameState.money -= 200; log("‚ùå Commande annul√©e ! Perte de production et -200‚Ç¨"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Rivalit√© concurrente", effect: () => { gameState.productionMultiplier *= 0.9; log("‚öîÔ∏è Rivalit√© concurrente ! Production -10%"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Nouvelle r√©glementation", effect: () => { gameState.money -= 800; log("üìã Nouvelle r√©glementation ! Co√ªt de mise en conformit√© -800‚Ç¨"); }, minClicks: 1000, maxClicks: 3000, probability: 0.04 },
      { name: "Gr√®ve g√©n√©rale", effect: () => { gameState.productionMultiplier *= 0.5; log("üö´ Gr√®ve g√©n√©rale ! Toute la production bloqu√©e !"); }, minClicks: 1000, maxClicks: 3000, probability: 0.02 },
      { name: "Faillite d'un fourniss
