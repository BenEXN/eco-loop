<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Looop v1.7.9.2.1 ‚Äì  vente auto et trader </title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { background: #f3f3f3; font-family: sans-serif; margin:0; padding:0; }
    h1 { text-align: center; margin: 25px 0 10px; }
    .container { display: flex; justify-content: center; align-items: flex-start; margin: 0 auto 18px auto; max-width: 950px; gap: 24px;}
    .category { background: #fff; border-radius: 18px; box-shadow: 0 4px 24px #0001; flex: 1; padding: 32px 18px 18px 18px; margin: 0 6px; min-width: 250px; max-width: 320px; min-height: 250px; display: flex; flex-direction: column; align-items: center;}
    .cat-title { font-size: 1.25em; margin-bottom: 20px; font-weight: bold; letter-spacing: 1px;}
    .stock, .eco-msg, .exo-msg, .env-msg { font-size: 1.1em; margin-bottom: 10px;}
    .products-box { background: #f7f7fa; border: 2px solid #dde1eb; border-radius: 10px; color: #333; margin-bottom: 10px; padding: 10px 28px; font-size: 1.2em; font-weight: bold; letter-spacing: 1px; box-shadow: 0 1px 4px #ddd5; min-width: 110px; text-align: center;}
    .message-box { border-radius: 10px; margin: 8px 0 14px 0; padding: 11px 14px 11px 14px; font-weight: bold; font-size: 1.08em; box-shadow: 0 1px 4px #0002; text-align: center; min-width: 130px; max-width: 260px; word-break: break-word; line-height: 1.25em;}
    .msg-orange { background: #ffe9cf; color: #d2691e; border: 2px solid #f5c387;}
    .msg-blue { background: #e7f4ff; color: #0978c6; border: 2px solid #7cc8fa;}
    .msg-red { background: #ffe3e3; color: #c00; border: 2px solid #e48888;}
    .msg-brown { background: #fff4d6; color: #be8c00; border: 2px solid #e2c071;}
    .btn-row { margin: 18px 0 0 0;}
    button { font-size: 1em; padding: 10px 18px; margin: 5px 0; border-radius: 14px; border: none; background: #ededed; color: #111; cursor: pointer; transition: background 0.2s;}
    button:disabled { opacity: 0.5; background: #ededed; color: #bbb; cursor: not-allowed;}
    .btn-prodauto { background: #2976d9; color: #fff; font-weight: bold; border-radius: 8px;}
    .btn-prodauto.on { background: #094075; color: #fff; }
    .btn-venteauto { background: #f9c9e6; color: #a52b74; font-weight: bold; margin-right: 10px; border-radius: 8px;}
    .btn-venteauto.on { background: #ea6bbd; color: #fff;}
    .btn-trading {
      background: #ededed;
      color: #111;
      font-weight: normal;
      border: none;
      border-radius: 14px;
      font-size: 1.08em;
      padding: 10px 18px;
      margin: 5px 0;
      cursor: pointer;
      box-shadow: 0 1px 2px #0001;
      transition: background 0.2s;
      display: inline-block;
    }
    .btn-trading:disabled {
      background: #ededed;
      color: #bbb;
      cursor: not-allowed;
    }
    .btn-primary { background: #2976d9; color: #fff; font-weight: bold; }
    .btn-yellow { background: #FFD600; color: #222; font-weight: bold;}
    .btn-green  { background: #4fd860; color: #fff; font-weight: bold;}
    .btn-annuler { background: #aaa; color: #fff; }
    .debug-row { margin: 0 0 32px 0; display: flex; justify-content: center; gap: 10px;}
    .message { font-weight: bold; min-height: 24px; margin: 10px 0;}
    #prodauto-row { width:100%; display:flex; justify-content: center; align-items: center; gap:12px; margin: 26px 0 18px 0;}
    #prodauto-wrapper, #venteauto-wrapper { display: flex; }
    @media (max-width: 900px) {
      #prodauto-row { margin: 16px 0 10px 0;}
    }
    #clics-container { text-align: center; margin: 25px 0 0 0; font-size: 1.2em; font-weight: bold; color: #333;}
    #revolution { color: #b10000; font-size: 1.1em; text-transform: uppercase;}
    #tech-level, #ia-info { font-size:1em; color:#2980b9; margin-bottom: 0; font-weight: normal;}
    #venteauto-info { font-size: 1.03em; color: #ea6bbd; margin: 2px 0 0 0; font-weight: normal;}
    #triche-sep { border: none; border-top: 3px solid #222; margin: 38px auto 12px auto; width: 94vw; max-width: 1000px;}
    #triche-label { text-align: left; font-size:1.13em; font-weight:normal; letter-spacing:1px; margin: 0 0 12px 0; color:#111; width: 95vw; max-width: 1000px; margin-left: auto; margin-right: auto;}
    #don-btn { margin-top: 10px; background: #FFD600; color: #222; font-weight: bold; border: none; border-radius: 8px; font-size: 1.1em; padding: 14px 20px; box-shadow: 0 1px 8px #fffdbe99;}
    /* Jauges sobres */
    .jauge-bottom-barre {
      margin: 0 auto 6px auto;
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 8px;
      max-width: 600px;
    }
    .jauge-bottom-label {
      min-width: 70px;
      font-size: .99em;
      color: #888;
      text-align: right;
    }
    .jauge-bottom-bar {
      background: #eee;
      border-radius: 8px;
      height: 13px;
      flex: 1;
      overflow: hidden;
      position: relative;
    }
    .jauge-bottom-fill {
      height: 100%;
      border-radius: 8px;
      transition: width 0.19s;
    }
    #jauge-nature { background: #86e08e;}
    #jauge-confort { background: #86b6ea;}
    #jauge-money { background: #ffe973;}
    #jauge-ia { background: #2976d9;}
    #jauge-tech { background: #ba9afc;}
    #jauge-venteauto { background: #fd90d9;}
    .jauge-bottom-val {
      font-size: .97em;
      color: #666;
      min-width: 60px;
      text-align: left;
      padding-left: 4px;
    }
    @media (max-width: 700px) {
      .container { flex-direction: column; align-items: stretch; gap: 12px;}
      .category { max-width: none; min-width: 0; margin: 0 0 20px 0; padding: 18px 10px 12px 10px;}
      .products-box, .message-box { min-width: 0; font-size: 1.04em; padding: 8px 4px;}
      #clics-container { font-size: 1.05em;}
      button { width: 96%; max-width: 340px; font-size: 1em; margin-left: auto; margin-right: auto;}
      .debug-row { flex-direction: column; gap: 6px;}
      #triche-label { font-size:1em; margin-left: 4vw;}
      h1 { font-size: 1.16em;}
      .jauge-bottom-barre { max-width: 98vw; }
      .jauge-bottom-label, .jauge-bottom-val { font-size: 0.91em; }
      #prodauto-row { flex-direction:column; gap:8px;}
    }
  </style>
</head>
<body>
  <h1>üåç Looop <span style="font-size:0.7em;color:#777;">v1.7.9.2</span></h1>

  <div class="container">
    <div class="category">
      <div class="cat-title">üå± Environnement</div>
      <div class="stock">Ressources : <span id="nature">300</span></div>
      <div id="alert-crise" class="message-box msg-orange" style="display:none;"></div>
      <div class="btn-row">
        <button id="produce-btn" onclick="produce()">üõ†Ô∏è Produire</button>
      </div>
    </div>
    <div class="category">
      <div class="cat-title">ü§ñ Exosomatisation</div>
      <div class="stock">Confort : <span id="confort">0</span></div>
      <div class="products-box">
        Produits cr√©√©s<br>
        <span id="production">0</span>
      </div>
      <div class="stock" id="tech-level"></div>
      <div class="stock" id="ia-info"></div>
      <div id="venteauto-info"></div>
      <div id="social-crise" class="message-box msg-brown" style="display:none;"></div>
      <div class="btn-row">
        <button id="sell-btn" onclick="sell()">üí∂ Vente</button>
      </div>
    </div>
    <div class="category">
      <div class="cat-title">üí∂ √âconomie</div>
      <div class="stock" id="money-row" style="display:none;">
        Monnaie (‚Ç¨) : <span id="money">10</span>
      </div>
      <button id="don-btn" onclick="receiveDon()">Recevoir mon don</button>
      <div id="eh-msg" class="message-box msg-blue" style="display:none;"></div>
      <div class="btn-row">
        <button id="upgrade-btn1" onclick="upgradeProd1()" style="display:none;">‚≠ê Am√©liorer la production (cr√©dit 1500)</button>
        <button id="upgrade-btn2" onclick="upgradeProd2()" style="display:none;">üí† Am√©liorer la production (2‚ÄØ000‚ÄØ‚Ç¨)</button>
        <button id="ouvrier-btn" onclick="acheterIA()" style="display:none;">ü§ñ Engager une IA (500‚ÄØ‚Ç¨)</button>
        <button id="evolution-btn" onclick="evolution()" style="display:none;">üå± √âvolution √©conomique</button>
        <button id="trading-btn" class="btn-trading" style="display:none;">
          üè™ Acheter un trader auto (1000‚ÄØ‚Ç¨)
        </button>
      </div>
    </div>
  </div>

  <div id="prodauto-row">
    <div id="venteauto-wrapper" style="display:none;">
      <button id="venteauto-btn" class="btn-venteauto">Vente auto : ON</button>
    </div>
    <div id="prodauto-wrapper" style="display:none;">
      <button id="prodauto-btn" class="btn-prodauto on">Production auto : ON</button>
    </div>
  </div>

  <!-- Jauges sobres + JAUGE VENTES AUTO -->
  <div style="margin: 0 auto 14px auto; max-width:620px;">
    <div class="jauge-bottom-barre">
      <div class="jauge-bottom-label">üå± Ressources</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-nature"></div></div>
      <div class="jauge-bottom-val" id="jauge-nature-txt"></div>
    </div>
    <div class="jauge-bottom-barre">
      <div class="jauge-bottom-label">ü§ñ Confort</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-confort"></div></div>
      <div class="jauge-bottom-val" id="jauge-confort-txt"></div>
    </div>
    <div class="jauge-bottom-barre">
      <div class="jauge-bottom-label">üí∂ Monnaie</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-money"></div></div>
      <div class="jauge-bottom-val" id="jauge-money-txt"></div>
    </div>
    <div class="jauge-bottom-barre">
      <div class="jauge-bottom-label">ü§ñ IA</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-ia"></div></div>
      <div class="jauge-bottom-val" id="jauge-ia-txt"></div>
    </div>
    <!-- JAUGE VENTES AUTO -->
    <div class="jauge-bottom-barre">
      <div class="jauge-bottom-label">üè™ Vente auto</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-venteauto"></div></div>
      <div class="jauge-bottom-val" id="jauge-venteauto-txt"></div>
    </div>
    <div class="jauge-bottom-barre">
      <div class="jauge-bottom-label">üß™ Technologie</div>
      <div class="jauge-bottom-bar"><div class="jauge-bottom-fill" id="jauge-tech"></div></div>
      <div class="jauge-bottom-val" id="jauge-tech-txt"></div>
    </div>
  </div>
  <div id="revolution" class="message-box msg-red" style="display:none;"></div>
  <div class="message" id="message"></div>
  <div id="clics-container">Clics/actions : <span id="clicks">0</span></div>
  <hr id="triche-sep">
  <div id="triche-label">Triche</div>
  <div class="debug-row">
    <button class="btn-yellow" id="test-btn" onclick="addMoney()">+1000 cr√©dits (test)</button>
    <button class="btn-yellow" id="plus1-btn" onclick="addOneNature()">+1 ressource</button>
    <button class="btn-yellow" id="test-clics-btn" onclick="addClicks50()">Clics +50 (test)</button>
    <button class="btn-annuler" id="undo-btn" onclick="undoAction()">‚è™ Annuler le clic pr√©c√©dent</button>
  </div>
  <script>
    let nature = 300, confort = 0, production = 0, money = 10, clicks = 0;
    let prodCost = 5, upgradeUsed1 = false, upgradeUsed2 = false, techLevel = 0;
    let lastCrisisResource = 20, criseSocialeActive = false, jeuBloque = false, lastState = null;
    let monnaieActive = false;
    let ia = 0, prixIA = 500;
    let iaProdTimer = null, iaProdOn = true;
    let tradingUnlocked = false, venteAutoActive = true;
    let venteAutoCount = 0;
    let venteAutoTimers = [];

    function updateJauges() {
      let maxNature = 300, maxConfort = 100, maxMoney = 5000, maxIA = 10, maxTech = 2, maxVenteAuto = 10;
      document.getElementById("jauge-nature").style.width = (100 * Math.max(0, Math.min(nature, maxNature)) / maxNature) + "%";
      document.getElementById("jauge-confort").style.width = (100 * Math.max(0, Math.min(confort, maxConfort)) / maxConfort) + "%";
      document.getElementById("jauge-money").style.width = (100 * Math.max(0, Math.min(money, maxMoney)) / maxMoney) + "%";
      document.getElementById("jauge-ia").style.width = (maxIA === 0 ? "0%" : (100 * Math.max(0, Math.min(ia, maxIA)) / maxIA) + "%");
      document.getElementById("jauge-tech").style.width = (100 * Math.max(0, Math.min(techLevel, maxTech)) / maxTech) + "%";
      document.getElementById("jauge-venteauto").style.width = (100 * Math.max(0, Math.min(venteAutoCount, maxVenteAuto)) / maxVenteAuto) + "%";
      document.getElementById("jauge-nature-txt").textContent = nature + " / " + maxNature;
      document.getElementById("jauge-confort-txt").textContent = confort + " / " + maxConfort;
      document.getElementById("jauge-money-txt").textContent = money + " ‚Ç¨";
      document.getElementById("jauge-ia-txt").textContent = ia + " IA";
      document.getElementById("jauge-tech-txt").textContent = "Niv. " + techLevel + " / " + maxTech;
      document.getElementById("jauge-venteauto-txt").textContent = venteAutoCount + " actives";
    }

    function updateUI(message = "") {
      document.getElementById("nature").textContent = nature;
      document.getElementById("confort").textContent = confort;
      document.getElementById("production").textContent = production;
      document.getElementById("tech-level").textContent = techLevel > 0 ? "Niveau technologique : " + techLevel : "";
      document.getElementById("clicks").textContent = clicks;
      document.getElementById("ia-info").textContent = ia > 0 ? "IA‚ÄØ: " + ia + " (production automatique)" : "";
      // Affiche ou masque la ligne venteauto-info
      let venteautoInfo = document.getElementById("venteauto-info");
      if (venteAutoCount > 0) {
        venteautoInfo.textContent = `Vente : ${venteAutoCount} (vente automatique)`;
        venteautoInfo.style.display = "block";
      } else {
        venteautoInfo.textContent = "";
        venteautoInfo.style.display = "none";
      }
      let disabled = (jeuBloque === true || !monnaieActive);

      document.getElementById("money-row").style.display = monnaieActive ? "block" : "none";
      document.getElementById("don-btn").style.display = monnaieActive ? "none" : "inline-block";
      if (monnaieActive) document.getElementById("money").textContent = money;

      document.getElementById("upgrade-btn1").style.display = (monnaieActive && clicks >= 100 && !upgradeUsed1) ? "inline-block" : "none";
      if (monnaieActive && clicks >= 101 && !upgradeUsed2) {
        document.getElementById("upgrade-btn2").style.display = "inline-block";
        document.getElementById("upgrade-btn2").disabled = (money < 2000) || disabled;
      } else {
        document.getElementById("upgrade-btn2").style.display = "none";
      }
      if (monnaieActive && clicks >= 250) {
        document.getElementById("ouvrier-btn").style.display = "inline-block";
        document.getElementById("ouvrier-btn").disabled = (money < prixIA || disabled);
      } else {
        document.getElementById("ouvrier-btn").style.display = "none";
      }
      document.getElementById("evolution-btn").style.display = (monnaieActive && nature <= 5 && !disabled) ? "inline-block" : "none";
      document.getElementById("produce-btn").disabled = (!monnaieActive || nature < prodCost || (!upgradeUsed1 && !upgradeUsed2 && money < 1) || disabled);
      document.getElementById("sell-btn").disabled = (!monnaieActive || production < 1 || disabled);
      document.getElementById("test-btn").disabled = !monnaieActive || disabled;
      document.getElementById("plus1-btn").disabled = !monnaieActive || disabled;
      document.getElementById("test-clics-btn").disabled = !monnaieActive || disabled;
      document.getElementById("upgrade-btn1").disabled = disabled;
      document.getElementById("evolution-btn").disabled = disabled;
      document.getElementById("undo-btn").disabled = disabled;
      document.getElementById("message").textContent = message;

      if (monnaieActive && clicks >= 500) {
        document.getElementById("trading-btn").style.display = "inline-block";
        document.getElementById("trading-btn").textContent = "üè™ Acheter une vente auto (1000‚ÄØ‚Ç¨)";
        document.getElementById("trading-btn").disabled = money < 1000 || disabled;
      } else {
        document.getElementById("trading-btn").style.display = "none";
      }

      let venteautoWrapper = document.getElementById("venteauto-wrapper");
      let venteautoBtn = document.getElementById("venteauto-btn");
      if (venteAutoCount > 0) {
        venteautoWrapper.style.display = "flex";
        venteautoBtn.textContent = "Vente auto : " + (venteAutoActive ? "ON" : "OFF");
        venteautoBtn.className = "btn-venteauto" + (venteAutoActive ? " on" : "");
      } else {
        venteautoWrapper.style.display = "none";
      }

      let prodautoWrapper = document.getElementById("prodauto-wrapper");
      let prodautoBtn = document.getElementById("prodauto-btn");
      if (ia > 0) {
        prodautoWrapper.style.display = "flex";
        prodautoBtn.textContent = "Production auto : " + (iaProdOn ? "ON" : "OFF");
        prodautoBtn.className = "btn-prodauto" + (iaProdOn ? " on" : "");
      } else {
        prodautoWrapper.style.display = "none";
      }

      let criseBox = document.getElementById("alert-crise");
      if (nature < 20) {
        criseBox.style.display = "block";
        criseBox.textContent = "Crise √©cologique‚ÄØ: risque sur l'habitabilit√© humaine de la plan√®te ‚Äì perte de confort";
      } else {
        criseBox.style.display = "none";
      }
      let ehBox = document.getElementById("eh-msg");
      if (monnaieActive && nature <= 5) {
        ehBox.style.display = "block";
        ehBox.textContent = "Une √©volution est possible‚ÄØ: passer √† l‚Äô√©conomie hom√©ostatique (EH)";
      } else {
        ehBox.style.display = "none";
      }
      let socialBox = document.getElementById("social-crise");
      let revolutionBox = document.getElementById("revolution");
      if (confort > 5) criseSocialeActive = true;
      if (criseSocialeActive && !jeuBloque) {
        if (confort > 0 && confort < 5) {
          socialBox.style.display = "block";
          socialBox.textContent = "Crise sociale ‚Äì risque de r√©volution";
        } else {
          socialBox.style.display = "none";
        }
        if (confort === 0) {
          revolutionBox.style.display = "block";
          revolutionBox.textContent = "R√âVOLUTION ‚Äì FIN DE JEU";
          jeuBloque = true;
        } else {
          revolutionBox.style.display = "none";
        }
      } else {
        socialBox.style.display = "none";
        revolutionBox.style.display = "none";
      }
      updateJauges();
    }

    function startAllVenteAuto() {
      stopAllVenteAuto();
      if (venteAutoActive) {
        for (let i = 0; i < venteAutoCount; i++) {
          venteAutoTimers[i] = setInterval(() => {
            if (jeuBloque || !monnaieActive || !venteAutoActive) return;
            if (production >= 1) {
              saveState();
              production -= 1;
              money += 2;
              if (money >= 0) confort += 1;
              updateUI();
            }
          }, 10000);
        }
      }
    }
    function stopAllVenteAuto() {
      for (let i = 0; i < venteAutoTimers.length; i++) {
        clearInterval(venteAutoTimers[i]);
      }
      venteAutoTimers = [];
    }

    document.getElementById("venteauto-btn").onclick = function() {
      venteAutoActive = !venteAutoActive;
      if (venteAutoActive) startAllVenteAuto();
      else stopAllVenteAuto();
      updateUI();
    };

    document.getElementById("trading-btn").onclick = function() {
      if (money >= 1000) {
        saveState();
        money -= 1000;
        venteAutoCount += 1;
        tradingUnlocked = true;
        startAllVenteAuto();
        updateUI("Vente auto ajout√©e‚ÄØ: " + venteAutoCount + " active(s) !");
      } else {
        updateUI("Il faut 1000 ‚Ç¨ pour ajouter une vente auto !");
      }
    };

    function saveState() {
      lastState = JSON.stringify({
        nature, confort, production, money, clicks, prodCost,
        upgradeUsed1, upgradeUsed2, techLevel, lastCrisisResource,
        criseSocialeActive, jeuBloque, monnaieActive, ia,
        tradingUnlocked, venteAutoActive, iaProdOn, venteAutoCount
      });
    }
    function undoAction() {
      if (lastState) {
        let s = JSON.parse(lastState);
        nature = s.nature;
        confort = s.confort;
        production = s.production;
        money = s.money;
        clicks = s.clicks;
        prodCost = s.prodCost;
        upgradeUsed1 = s.upgradeUsed1;
        upgradeUsed2 = s.upgradeUsed2;
        techLevel = s.techLevel;
        lastCrisisResource = s.lastCrisisResource;
        criseSocialeActive = s.criseSocialeActive;
        jeuBloque = s.jeuBloque;
        monnaieActive = s.monnaieActive;
        ia = s.ia;
        tradingUnlocked = s.tradingUnlocked;
        venteAutoActive = s.venteAutoActive;
        iaProdOn = s.iaProdOn;
        venteAutoCount = s.venteAutoCount || 0;
        startAllVenteAuto();
        updateUI("Derni√®re action annul√©e !");
      }
    }

    function produce() {
      if (jeuBloque || !monnaieActive) return;
      saveState();
      if (nature >= prodCost && (money >= 1 || upgradeUsed1 || upgradeUsed2)) {
        let previousNature = nature;
        nature -= prodCost;
        production += 1;
        money -= 1;
        clicks++;
        if (nature < 20 && previousNature >= 20) lastCrisisResource = previousNature;
        if (nature < 20 && Math.floor((lastCrisisResource - nature) / 3) > 0) {
          let palier = Math.floor((lastCrisisResource - nature) / 3);
          for (let i = 0; i < palier; i++) confort = Math.floor(confort / 2);
          lastCrisisResource = lastCrisisResource - palier * 3;
        }
        updateUI("");
      } else if (nature < prodCost) {
        updateUI("Plus assez de ressources !");
      } else {
        updateUI("Pas assez de ressources ou de monnaie !");
      }
    }

    function sell() {
      if (jeuBloque || !monnaieActive) return;
      saveState();
      if (production >= 1) {
        let vendu = 1;
        production -= vendu;
        money += 2 * vendu;
        if (money >= 0) confort += 1 * vendu;
        clicks++;
        updateUI("");
      } else {
        updateUI("Aucun produit √† vendre !");
      }
    }

    function upgradeProd1() {
      if (jeuBloque || !monnaieActive || upgradeUsed1) return;
      saveState();
      money -= 1500;
      upgradeUsed1 = true;
      if (upgradeUsed2) {
        prodCost = 3;
        techLevel = 2;
        updateUI("Deuxi√®me am√©lioration activ√©e ! Co√ªt de production r√©duit √† 3 ressources.");
      } else {
        prodCost = 4;
        techLevel = 1;
        updateUI("Am√©lioration par cr√©dit (1500) activ√©e ! Co√ªt de production r√©duit √† 4 ressources.");
      }
    }
    function upgradeProd2() {
      if (jeuBloque || !monnaieActive || upgradeUsed2 || money < 2000) return;
      saveState();
      money -= 2000;
      upgradeUsed2 = true;
      if (upgradeUsed1) {
        prodCost = 3;
        techLevel = 2;
        updateUI("Deuxi√®me am√©lioration activ√©e ! Co√ªt de production r√©duit √† 3 ressources.");
      } else {
        prodCost = 4;
        techLevel = 1;
        updateUI("Am√©lioration par paiement (2‚ÄØ000‚ÄØ‚Ç¨) activ√©e ! Co√ªt de production r√©duit √† 4 ressources.");
      }
    }

    function acheterIA() {
      if (jeuBloque || !monnaieActive || money < prixIA) return;
      saveState();
      money -= prixIA;
      ia++;
      updateUI("IA engag√©e ! Production automatique +1.");
      manageIAProduction();
    }

    function manageIAProduction() {
      clearInterval(iaProdTimer);
      if (ia > 0 && iaProdOn) {
        iaProdTimer = setInterval(() => {
          if (jeuBloque || !monnaieActive || ia === 0 || !iaProdOn) return;
          for (let i = 0; i < ia; i++) {
            if (nature >= prodCost && (money >= 1 || upgradeUsed1 || upgradeUsed2)) {
              nature -= prodCost;
              production += 1;
              money -= 1;
            }
          }
          updateUI();
        }, 5000);
      }
    }

    document.getElementById("prodauto-btn").onclick = function() {
      iaProdOn = !iaProdOn;
      manageIAProduction();
      updateUI();
    };

    function evolution() {
      if (jeuBloque || !monnaieActive) return;
      saveState();
      updateUI("‚ö° Passage √† l'√©conomie hom√©ostatique : nouvelle phase √† venir !");
    }

    function addMoney() {
      if (jeuBloque || !monnaieActive) return;
      saveState();
      money += 1000;
      updateUI("Test : +1000 cr√©dits !");
    }
    function addOneNature() {
      if (jeuBloque || !monnaieActive) return;
      saveState();
      nature += 1;
      updateUI("+1 ressource ajout√©e !");
    }
    function addClicks50() {
      if (jeuBloque || !monnaieActive) return;
      saveState();
      clicks += 50;
      updateUI("Test : +50 clics !");
    }
    function receiveDon() {
      if (monnaieActive) return;
      saveState();
      monnaieActive = true;
      updateUI("Vous avez re√ßu votre don initial de monnaie (‚Ç¨) !");
    }
    let oldProduce = produce, oldSell = sell;
    produce = function() { oldProduce(); afterClick(); };
    sell = function() { oldSell(); afterClick(); };
    function afterClick() { updateUI(); }

    startAllVenteAuto();
    updateUI();
  </script>
</body>
</html>
